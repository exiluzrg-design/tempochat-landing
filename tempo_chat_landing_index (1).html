<!doctype html>
<html lang="es">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>TempoChat — 10 minutos de claridad, privados y 24/7</title>
  <meta name="description" content="Sesiones privadas de 10 minutos. Sin registro, 24/7. Pagás y entrás al chat. TempoChat: tu momento de claridad."/>
  <meta property="og:title" content="TempoChat — 10 minutos de claridad" />
  <meta property="og:description" content="Sesiones privadas, efímeras y sin registro. Pagás y entrás al chat." />
  <meta property="og:type" content="website" />
  <meta property="og:url" content="https://tempochat.com.ar" />
  <meta property="og:image" content="/og-tempochat.png" />
  <link rel="icon" href="/favicon.ico" />
  <script src="https://cdn.tailwindcss.com"></script>
  <style>
    /* fuente base elegante sin dependencias */
    :root { color-scheme: dark; }
    @media (prefers-color-scheme: light) {
      :root { color-scheme: light dark; }
    }
    body { font-family: ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Ubuntu, Cantarell, Noto Sans, Helvetica Neue, Arial, "Apple Color Emoji", "Segoe UI Emoji"; }
    .grad { background: radial-gradient(1200px 600px at 50% -10%, rgba(139,92,246,.25), transparent 60%), radial-gradient(800px 400px at 0% 10%, rgba(244,114,182,.12), transparent 60%), linear-gradient(180deg, #0a0a0b, #000); }
  </style>
</head>
<body class="grad text-zinc-100 selection:bg-violet-600/40">
  <header class="max-w-4xl mx-auto px-5 py-6 flex items-center justify-between">
    <div class="text-lg tracking-wide font-semibold">Tempo<span class="text-violet-300">Chat</span></div>
    <nav class="hidden sm:flex items-center gap-6 text-sm text-zinc-400">
      <a href="#como" class="hover:text-zinc-200">Cómo funciona</a>
      <a href="#por-que" class="hover:text-zinc-200">Por qué</a>
      <a href="#faq" class="hover:text-zinc-200">FAQ</a>
    </nav>
  </header>

  <main class="max-w-4xl mx-auto px-5 pb-24">
    <!-- Hero -->
    <section class="pt-6 sm:pt-14 text-center">
      <h1 class="text-3xl sm:text-5xl font-semibold leading-tight">
        Tu sesión privada de <span class="text-violet-300">10 minutos</span>,
        disponible <span class="text-violet-300">24/7</span>
      </h1>
      <p class="mt-3 sm:mt-4 text-zinc-300 max-w-2xl mx-auto">Sin registro. Pagás y entrás al chat. Un espacio efímero para preguntar lo que quieras: amor, trabajo, decisiones, sueños. Lo que pasa en la sesión, queda en la sesión.</p>

      <div class="mt-7 flex flex-col sm:flex-row items-center justify-center gap-3">
        <!-- Reemplazá el href con tu Link de Pago/Checkout Pro de Mercado Pago -->
        <a href="https://www.mercadopago.com.ar/checkout/v1/redirect?pref_id=REEMPLAZAR_PREF_ID" class="px-6 py-3 rounded-xl bg-violet-600 hover:bg-violet-500 font-medium">Reservar sesión 10′ — $3.000 ARS</a>
        <a href="#como" class="px-6 py-3 rounded-xl bg-zinc-900/70 ring-1 ring-zinc-800 hover:bg-zinc-800">Cómo funciona</a>
      </div>

      <div class="mt-8 grid grid-cols-2 sm:grid-cols-4 gap-3 text-left max-w-3xl mx-auto">
        <div class="rounded-2xl bg-zinc-900/60 ring-1 ring-zinc-800 p-4"><div class="text-sm text-zinc-400">Diferencial</div><div class="mt-1 font-medium">Sin registro</div></div>
        <div class="rounded-2xl bg-zinc-900/60 ring-1 ring-zinc-800 p-4"><div class="text-sm text-zinc-400">Privacidad</div><div class="mt-1 font-medium">No guardamos el chat</div></div>
        <div class="rounded-2xl bg-zinc-900/60 ring-1 ring-zinc-800 p-4"><div class="text-sm text-zinc-400">Disponibilidad</div><div class="mt-1 font-medium">24 horas, 7 días</div></div>
        <div class="rounded-2xl bg-zinc-900/60 ring-1 ring-zinc-800 p-4"><div class="text-sm text-zinc-400">Foco</div><div class="mt-1 font-medium">10′ intensivos</div></div>
      </div>
    </section>

    <!-- Cómo funciona -->
    <section id="como" class="mt-16">
      <h2 class="text-xl font-semibold">Cómo funciona</h2>
      <ol class="mt-4 grid sm:grid-cols-3 gap-4 text-sm">
        <li class="rounded-2xl bg-zinc-900/60 ring-1 ring-zinc-800 p-4">
          <div class="font-medium">1) Pagás tu sesión</div>
          <p class="mt-1 text-zinc-300">Checkout con Mercado Pago. Sin cuentas ni contraseñas.</p>
        </li>
        <li class="rounded-2xl bg-zinc-900/60 ring-1 ring-zinc-800 p-4">
          <div class="font-medium">2) Entrás al chat</div>
          <p class="mt-1 text-zinc-300">Acceso inmediato con un enlace. El reloj empieza a correr.</p>
        </li>
        <li class="rounded-2xl bg-zinc-900/60 ring-1 ring-zinc-800 p-4">
          <div class="font-medium">3) 10 minutos de claridad</div>
          <p class="mt-1 text-zinc-300">Preguntás lo que quieras. Al terminar, podés extender 10′ más.</p>
        </li>
      </ol>
    </section>

    <!-- Por qué -->
    <section id="por-que" class="mt-16">
      <h2 class="text-xl font-semibold">¿Por qué TempoChat?</h2>
      <div class="mt-4 grid sm:grid-cols-2 gap-4 text-sm">
        <div class="rounded-2xl bg-zinc-900/60 ring-1 ring-zinc-800 p-4">
          <div class="font-medium">Privado y efímero</div>
          <p class="mt-1 text-zinc-300">No pedimos datos personales y no guardamos el contenido de la sesión. Lo que vivís queda entre vos y tu momento.</p>
        </div>
        <div class="rounded-2xl bg-zinc-900/60 ring-1 ring-zinc-800 p-4">
          <div class="font-medium">Guía cálida</div>
          <p class="mt-1 text-zinc-300">Tono humano, espiritual y psicológico. Sin tecnicismos fríos. Sin juicios.</p>
        </div>
      </div>
    </section>

    <!-- FAQ -->
    <section id="faq" class="mt-16">
      <h2 class="text-xl font-semibold">Preguntas frecuentes</h2>
      <div class="mt-4 grid gap-3 text-sm">
        <details class="rounded-2xl bg-zinc-900/60 ring-1 ring-zinc-800 p-4">
          <summary class="font-medium cursor-pointer">¿Necesito crear una cuenta?</summary>
          <p class="mt-2 text-zinc-300">No. Pagás y accedés directo. Sin registro, sin contraseñas.</p>
        </details>
        <details class="rounded-2xl bg-zinc-900/60 ring-1 ring-zinc-800 p-4">
          <summary class="font-medium cursor-pointer">¿Qué temas puedo consultar?</summary>
          <p class="mt-2 text-zinc-300">Amor, trabajo, decisiones, ansiedad, sueños, bloqueos, motivación. Si aparece un tema sensible (daño propio/ajeno), priorizamos tu seguridad y te orientamos a ayuda profesional.</p>
        </details>
        <details class="rounded-2xl bg-zinc-900/60 ring-1 ring-zinc-800 p-4">
          <summary class="font-medium cursor-pointer">¿Guardan mi conversación?</summary>
          <p class="mt-2 text-zinc-300">No. Procesamos tu chat en tránsito para responderte y después se descarta. Solo registramos lo mínimo para operar el servicio (tiempo, pago).</p>
        </details>
      </div>
    </section>
      
    <!-- Chat con contador (se muestra cuando hay ?session=TOKEN en la URL) -->
    <section id="chat" class="hidden pt-10">
      <div class="max-w-2xl mx-auto">
        <div class="flex items-center justify-between mb-3">
          <div class="text-sm text-zinc-400">Tiempo restante</div>
          <div class="flex items-center gap-3">
            <button id="extend" class="px-3 py-1.5 text-sm rounded-xl bg-violet-600 hover:bg-violet-500">Extender 10′</button>
            <div id="timer" class="text-2xl font-semibold text-violet-300">10:00</div>
          </div>
        </div>

        <div id="chatBox" class="h-[60vh] min-h-[420px] overflow-y-auto rounded-2xl bg-zinc-900/60 ring-1 ring-zinc-800 p-4 space-y-3"></div>

        <div class="mt-3 flex gap-2">
          <input id="chatInput" type="text" placeholder="Escribí tu pregunta…" class="flex-1 bg-zinc-900/80 border border-zinc-800 rounded-xl px-3 py-2 text-sm outline-none focus:ring-2 focus:ring-violet-600"/>
          <button id="sendBtn" class="rounded-xl bg-violet-600 hover:bg-violet-500 px-3 py-2 text-sm">Enviar</button>
        </div>
        <p class="mt-2 text-[11px] text-zinc-500">Las lecturas son simbólicas y no sustituyen ayuda profesional. Si estás en riesgo, buscá ayuda inmediata.</p>
      </div>
    </section>

  </main>

  <footer class="border-t border-zinc-900/70">
    <div class="max-w-4xl mx-auto px-5 py-8 text-xs text-zinc-400">
      <div>© <span id="y"></span> TempoChat — Sesiones privadas de 10 minutos.</div>
      <div class="mt-2">Aviso: las lecturas son simbólicas y orientativas. No sustituyen ayuda profesional médica, psicológica ni legal. Si estás en riesgo, buscá ayuda inmediata.</div>
    </div>
  </footer>

  <script>
(()=>{
  // Año del footer
  const yEl = document.getElementById('y');
  if (yEl) yEl.textContent = new Date().getFullYear();

  // --- Vista Chat si viene con ?session=TOKEN (o demo con ?demo=1) ---
  const qs = new URLSearchParams(location.search);
  const sessionToken = qs.get('session'); // tu backend debería poner acá un JWT válido
  const minutesParam = parseInt(qs.get('m') || '10', 10);

  const chatSec = document.getElementById('chat');
  const chatBox = document.getElementById('chatBox');
  const inputEl = document.getElementById('chatInput');
  const sendBtn = document.getElementById('sendBtn');
  const timerEl = document.getElementById('timer');
  const extendBtn = document.getElementById('extend');

  function showChat(){
    // Oculta las demás secciones y muestra el chat
    document.querySelectorAll('main > section').forEach(s=>{ if (s.id !== 'chat') s.classList.add('hidden'); });
    chatSec.classList.remove('hidden');
  }

  // --- Timer ---
  let seconds = 0; let tid = null;
  function updateTimer(){
    const mm = String(Math.floor(seconds/60)).padStart(2,'0');
    const ss = String(seconds%60).padStart(2,'0');
    timerEl.textContent = `${mm}:${ss}`;
    if (seconds <= 30) timerEl.classList.add('text-rose-300');
  }
  function startTimer(total){
    seconds = total; updateTimer();
    tid = setInterval(()=>{
      seconds--; updateTimer();
      if (seconds <= 0){ clearInterval(tid); endSession(); }
    }, 1000);
  }

  // --- Chat helpers ---
  function push(role, text){
    const wrap = document.createElement('div');
    wrap.className = role==='user' ? 'flex justify-end' : 'flex justify-start';
    const bubble = document.createElement('div');
    bubble.className = (role==='user' ? 'bg-violet-600/90' : 'bg-zinc-900/80') + ' px-4 py-2 rounded-2xl max-w-[85%] text-sm whitespace-pre-wrap';
    bubble.textContent = text;
    wrap.appendChild(bubble); chatBox.appendChild(wrap);
    chatBox.scrollTo({ top: chatBox.scrollHeight, behavior: 'smooth' });
  }

  async function botReply(text){
    // TODO: reemplazar por fetch a tu backend /api/chat con Authorization: Bearer sessionToken
    // const res = await fetch('/api/chat', { method:'POST', headers:{ 'Content-Type':'application/json', 'Authorization': `Bearer ${sessionToken}` }, body: JSON.stringify({ text }) });
    // const data = await res.json(); return data.reply;
    await new Promise(r=>setTimeout(r, 450));
    return '✨ ' + (text ? `Sobre “${text}”: escuchá tu intuición y priorizá tu bienestar. Si querés, seguimos con otra pregunta.` : 'Estoy listo. ¿Sobre qué querés hablar?');
  }

  async function send(){
    const val = inputEl.value.trim(); if(!val) return; inputEl.value='';
    push('user', val);
    const reply = await botReply(val);
    push('bot', reply);
  }

  function endSession(){
    push('bot', '⏳ Tu sesión terminó. ¿Querés extender 10 minutos más?');
    inputEl.disabled = true; sendBtn.disabled = true;
  }

  sendBtn?.addEventListener('click', send);
  inputEl?.addEventListener('keydown', (e)=>{ if(e.key==='Enter') send(); });
  extendBtn?.addEventListener('click', ()=>{
    // TODO: redirigir a una preferencia de MP para extensión de +10′ y usar su webhook para sumar tiempo del lado servidor
    location.href = 'https://www.mercadopago.com.ar/checkout/v1/redirect?pref_id=REEMPLAZAR_PREF_ID_EXTENSION';
  });

  if (sessionToken){
    showChat();
    const mins = Number.isFinite(minutesParam) ? minutesParam : 10;
    startTimer(mins*60);
    push('bot', `✨ Bienvenid@. Tenés ${mins} minutos. ¿Sobre qué querés hablar?`);
  }

  // Modo demo: ?demo=1&m=2 para probar sin pago
  if (!sessionToken && qs.get('demo')==='1'){
    showChat();
    const mins = Number.isFinite(minutesParam) ? minutesParam : 2;
    startTimer(mins*60);
    push('bot', `✨ Modo demo. Tenés ${mins} minutos para probar.`);
  }
})();
</script>
</body>
</html>
